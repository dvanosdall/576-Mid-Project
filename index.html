<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>Flower Recall App</title>

    <link rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css" />
    <script src="https://js.arcgis.com/4.26/"></script>

    <!-- styles -->
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/walkModal.css" />
    <link rel="stylesheet" href="css/flowerModal.css" />
    <link rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css" />

    <!-- scripts -->
    <script type="module" src="js/main.js"></script>
</head>

<body>
    <div id="viewDiv" style="height: 95vh; width: 100%;">

        <div id="walkStatusBanner">No Active Walk</div>

        <div id="status"></div>
        <!-- Action buttons -->
        <button id="startWalkBtn" class="btn">Start/End Walk</button>
        <button id="showAllWalksBtn" class="btn">All Walks</button>
        <button id="addFlowerBtn" class="btn">Add Flower</button>

        <!-- Walk Modal -->
        <div id="walkModal" class="modal">
            <div class="modal-content">
                <div class="walk-status-line">
                    <strong class="walk-status-label">Walk Status:</strong>
                    <span id="walkStatus" class="not-started">Not Started</span>
                </div>

                <div id="walkStartTimeContainer" style="display: none; text-align: center; margin-bottom: 12px;">
                    <strong>Started:</strong> <span id="walkStartTime"></span>
                </div>

                <div id="walkNotesContainer" style="display: none; margin-bottom: 16px;">
                    <label for="walkNotes" style="font-weight: 600;">Walk Notes:</label>
                    <textarea id="walkNotes" rows="3" placeholder="Enter notes during your walk..."></textarea>
                    <button id="saveWalkNotesBtn" style="display:none;">Save Notes</button>
                </div>

                <hr class="modal-separator" />

                <div class="walk-button-row">
                    <div class="walk-buttons-left">
                        <button id="startWalkBtnModal">Start Walk</button>
                        <button id="endWalkBtnModal" style="display:none;">End Walk</button>
                    </div>
                    <div class="walk-button-right">
                        <button id="closeWalkBtnModal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Flower Modal -->
        <div id="flowerModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Add Flower</h2>

                <label for="photoInput">Photo:</label>
                <input type="url" id="photoInput" placeholder="https://example.com/image.jpg" />

                <label for="notesInput">Notes:</label>
                <textarea id="notesInput" rows="4" placeholder="Optional notes..."></textarea>

                <button id="submitFlowerBtn">Save Flower</button>
            </div>
        </div>

        <!-- All Walks Modal -->
        <div id="allWalksModal" class="modal" style="display:none;">
            <div class="modal-content" style="max-height: 70vh; overflow-y: auto;">
                <h2>All Completed Walks</h2>
                <div id="walksList" style="max-height: 50vh; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
                    <!-- Walk list items will go here -->
                </div>
                <button id="exportWalksBtn" style="margin-top: 12px;">Export Walks as JSON</button>
                <button id="closeAllWalksBtn" style="margin-top: 12px;">Close</button>
            </div>
        </div>

        <!-- Flower Detail Modal -->
        <div id="flowerDetailModal" class="modal">
  <div class="modal-content">
    <span id="closeFlowerDetailModal" class="close">&times;</span>
    <h2>Flower Details</h2>
    <table class="popup-table">
      <tbody>
        <tr>
          <th>Timestamp:</th>
          <td id="flowerTimestamp">Loading...</td>
        </tr>
        <tr>
          <th>Photo:</th>
          <td id="flowerPhotoLink">Loading...</td>
        </tr>
        <tr>
          <th>Notes:</th>
          <td id="flowerNotes">Loading...</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
</body>

</html>